d 700
何番目かはわかるな
(l,r)の取り方がN+(N-1)+...+1なので計N(N+1)/2要素、
よって最終的な数列のN(N+1)/4+1番目(1-indexed)の要素が答え。

t[i][j] := i<=j間の中央値　としたとき、
t[i][j+1] =
↑ちがう

p:値でにぶたんをする
中央値xは「b中にx以上の要素が(M+1)/2個以上含まれる」最大のx
これを用いて問題を言い換えられる
xとの大小で-1,1にすると、a[l,r]の要素の総和に帰着できる。
(1<=l<=r<=N)
p:a[l,r]の要素の総和は累積和。
S[r]-S[l-1]>=0 <=> カウント1　なので、
(l,r)のうちS[l]<=S[r]を満たすものは何通りか(0<=l<r<=N)となる。
p:これは転倒数を求めればよく、典型。
Sの値の範囲は-N~Nなので一律Nを足して0~2Nにすればbitでいける。
